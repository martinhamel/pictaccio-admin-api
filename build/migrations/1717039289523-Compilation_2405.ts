import { MigrationInterface, QueryRunner } from "typeorm";

export class Compilation24051717039289523 implements MigrationInterface {
    name = 'Compilation24051717039289523';

    public async up(queryRunner: QueryRunner): Promise<void> {
        await queryRunner.query(`CREATE TABLE "admin"."users" ("id" uuid NOT NULL DEFAULT uuid_generate_v4(), "avatar" text, "email" text NOT NULL, "hash" text, "info" jsonb NOT NULL, "last_login" TIMESTAMP, "rev" integer NOT NULL, "roles" jsonb NOT NULL, "salt" text, "seed" text, "status" text NOT NULL DEFAULT 'ghost', "created_on" TIMESTAMP NOT NULL DEFAULT now(), CONSTRAINT "users_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "admin"."order_comments" ("id" SERIAL NOT NULL, "message" text NOT NULL, "edited" boolean NOT NULL, "created_on" TIMESTAMP NOT NULL DEFAULT now(), "updated_on" TIMESTAMP NOT NULL DEFAULT now(), "order_id" bigint, "user_id" uuid, CONSTRAINT "comments_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "comments_order_id_fkey" ON "admin"."order_comments" ("order_id") `);
        await queryRunner.query(`CREATE INDEX "comments_user_id_fkey" ON "admin"."order_comments" ("user_id") `);
        await queryRunner.query(`CREATE TABLE "admin"."order_statuses" ("id" SERIAL NOT NULL, "status" text NOT NULL DEFAULT 'pending', "order_id" bigint, CONSTRAINT "REL_3ea5b2fdf48f16b209b65e7381" UNIQUE ("order_id"), CONSTRAINT "order_statuses_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE UNIQUE INDEX "order_statuses_order_id_fkey" ON "admin"."order_statuses" ("order_id") `);
        await queryRunner.query(`CREATE TABLE "transactional"."delivery_options" ("id" BIGSERIAL NOT NULL, "internal_name" text NOT NULL, "name_locale" jsonb NOT NULL, "base_price" numeric(10,2) NOT NULL, "lead_time" integer NOT NULL, "method" text NOT NULL, "options" jsonb, CONSTRAINT "UQ_72951c8e0b3fb8275dc0c500de8" UNIQUE ("internal_name"), CONSTRAINT "delivery_options_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE UNIQUE INDEX "delivery_options_internal_name_idx" ON "transactional"."delivery_options" ("internal_name") `);
        await queryRunner.query(`CREATE INDEX "delivery_options_method_idx" ON "transactional"."delivery_options" ("method") `);
        await queryRunner.query(`CREATE TABLE "transactional"."delivery_option_groups" ("id" BIGSERIAL NOT NULL, "internal_name" text NOT NULL, CONSTRAINT "delivery_option_groups_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE UNIQUE INDEX "delivery_option_groups_internal_name_idx" ON "transactional"."delivery_option_groups" ("internal_name") `);
        await queryRunner.query(`CREATE TABLE "transactional"."product_categories" ("id" BIGSERIAL NOT NULL, "internal_name" text NOT NULL, "name_locale" jsonb NOT NULL, "priority" integer NOT NULL, CONSTRAINT "product_categories_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE UNIQUE INDEX "product_categories_internal_name_idx" ON "transactional"."product_categories" ("internal_name") `);
        await queryRunner.query(`CREATE TABLE "transactional"."product_type_themes" ("id" BIGSERIAL NOT NULL, "default_theme" text, "themes_map" jsonb NOT NULL, "theme_set_id" bigint, CONSTRAINT "product_type_themes_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "product_type_themes_theme_set_id_fkey" ON "transactional"."product_type_themes" ("theme_set_id") `);
        await queryRunner.query(`CREATE TABLE "transactional"."product_theme_sets" ("id" BIGSERIAL NOT NULL, "internal_name" text NOT NULL, "themes" jsonb NOT NULL, "created_on" TIMESTAMP NOT NULL DEFAULT now(), CONSTRAINT "product_theme_sets_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE UNIQUE INDEX "product_theme_sets_internal_name_idx" ON "transactional"."product_theme_sets" ("internal_name") `);
        await queryRunner.query(`CREATE TABLE "transactional"."product_custom_templates" ("id" BIGSERIAL NOT NULL, "internal_name" text NOT NULL, "options" jsonb NOT NULL, "created_on" TIMESTAMP NOT NULL DEFAULT now(), CONSTRAINT "product_custom_templates_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE UNIQUE INDEX "product_custom_templates_internal_name_idx" ON "transactional"."product_custom_templates" ("internal_name") `);
        await queryRunner.query(`CREATE TABLE "transactional"."product_type_customs" ("id" BIGSERIAL NOT NULL, "custom_template_id" bigint, CONSTRAINT "product_type_customs_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "product_type_customs_custom_template_id_fkey" ON "transactional"."product_type_customs" ("custom_template_id") `);
        await queryRunner.query(`CREATE TABLE "transactional"."products" ("id" BIGSERIAL NOT NULL, "internal_name" text NOT NULL, "name_locale" jsonb NOT NULL, "archived" boolean NOT NULL, "description_locale" jsonb NOT NULL, "images" jsonb NOT NULL, "options" jsonb NOT NULL DEFAULT '{}', "price" numeric(10,2) NOT NULL, "priority" integer NOT NULL, "type" text NOT NULL DEFAULT 'normal', "weight" text NOT NULL, "created_on" TIMESTAMP NOT NULL DEFAULT now(), "modified_on" TIMESTAMP NOT NULL DEFAULT now(), "category_id" bigint, "theme_id" bigint, "custom_id" bigint, CONSTRAINT "REL_02f7c9972c12ee9a155bcb5377" UNIQUE ("theme_id"), CONSTRAINT "REL_c2ef038c5b16485c916206e661" UNIQUE ("custom_id"), CONSTRAINT "products_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE UNIQUE INDEX "products_internal_name_idx" ON "transactional"."products" ("internal_name") `);
        await queryRunner.query(`CREATE INDEX "products_archived_idx" ON "transactional"."products" ("archived") `);
        await queryRunner.query(`CREATE INDEX "products_type_idx" ON "transactional"."products" ("type") `);
        await queryRunner.query(`CREATE INDEX "products_category_id_fkey" ON "transactional"."products" ("category_id") `);
        await queryRunner.query(`CREATE INDEX "products_theme_id_fkey" ON "transactional"."products" ("theme_id") `);
        await queryRunner.query(`CREATE INDEX "products_custom_id_fkey" ON "transactional"."products" ("custom_id") `);
        await queryRunner.query(`CREATE TABLE "transactional"."product_catalogs" ("id" BIGSERIAL NOT NULL, "internal_name" text NOT NULL, "name_locale" jsonb NOT NULL, "created_on" TIMESTAMP NOT NULL DEFAULT now(), CONSTRAINT "product_catalogs_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE UNIQUE INDEX "product_catalogs_internal_name_idx" ON "transactional"."product_catalogs" ("internal_name") `);
        await queryRunner.query(`CREATE TABLE "transactional"."product_crosssells" ("id" BIGSERIAL NOT NULL, "internal_name" text NOT NULL, "options" jsonb NOT NULL, CONSTRAINT "product_crosssells_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE UNIQUE INDEX "product_crosssells_internal_name_idx" ON "transactional"."product_crosssells" ("internal_name") `);
        await queryRunner.query(`CREATE SCHEMA IF NOT EXISTS transactional;`);
        await queryRunner.query(`CREATE SCHEMA IF NOT EXISTS admin;`);
        await queryRunner.query(`CREATE ROLE pictaccio_transactional WITH LOGIN PASSWORD 'password';GRANT CONNECT ON DATABASE "pictaccio" TO pictaccio_transactional;`);
        await queryRunner.query(`CREATE TABLE "transactional"."workflows" ("id" BIGSERIAL NOT NULL, "internal_name" text NOT NULL, "options" jsonb NOT NULL, CONSTRAINT "workflows_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE UNIQUE INDEX "workflows_internal_name_idx" ON "transactional"."workflows" ("internal_name") `);
        await queryRunner.query(`CREATE TABLE "transactional"."sessions" ("id" BIGSERIAL NOT NULL, "name_locale" jsonb NOT NULL, "archived" boolean NOT NULL DEFAULT false, "options" jsonb NOT NULL, "expire_date" TIMESTAMP NOT NULL, "publish_date" TIMESTAMP NOT NULL, "product_crosssell_id" bigint, "workflow_id" bigint, CONSTRAINT "sessions_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "sessions_archived_idx" ON "transactional"."sessions" ("archived") `);
        await queryRunner.query(`CREATE INDEX "sessions_expire_date_idx" ON "transactional"."sessions" ("expire_date") `);
        await queryRunner.query(`CREATE INDEX "sessions_publish_date_idx" ON "transactional"."sessions" ("publish_date") `);
        await queryRunner.query(`CREATE INDEX "sessions_product_crosssell_fkey" ON "transactional"."sessions" ("product_crosssell_id") `);
        await queryRunner.query(`CREATE INDEX "sessions_workflow_fkey" ON "transactional"."sessions" ("workflow_id") `);
        await queryRunner.query(`INSERT INTO "public"."typeorm_metadata"("database", "schema", "table", "type", "name", "value") VALUES ($1, $2, $3, $4, $5, $6)`, ["pictaccio", "transactional", "subjects", "GENERATED_COLUMN", "display_name", "(info->>'firstName')::text || ' ' || (info->>'lastName')::text"]);
        await queryRunner.query(`CREATE TABLE "transactional"."subjects" ("id" BIGSERIAL NOT NULL, "code" text NOT NULL, "display_name" text GENERATED ALWAYS AS ((info->>'firstName')::text || ' ' || (info->>'lastName')::text) STORED NOT NULL, "group" text, "info" jsonb NOT NULL, "mappings" jsonb NOT NULL, "photos" jsonb NOT NULL, "unique_id" text NOT NULL, "versions" jsonb, "session_id" bigint, CONSTRAINT "subjects_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "subjects_code_idx" ON "transactional"."subjects" ("code") `);
        await queryRunner.query(`CREATE INDEX "subjects_display_name_idx" ON "transactional"."subjects" ("display_name") `);
        await queryRunner.query(`CREATE INDEX "subjects_group_idx" ON "transactional"."subjects" ("group") `);
        await queryRunner.query(`CREATE INDEX "subjects_unique_id_idx" ON "transactional"."subjects" ("unique_id") `);
        await queryRunner.query(`CREATE INDEX "subjects_session_id_fkey" ON "transactional"."subjects" ("session_id") `);
        await queryRunner.query(`CREATE TABLE "admin"."order_published_photos" ("id" SERIAL NOT NULL, "original" boolean NOT NULL, "original_path" text NOT NULL, "published" boolean NOT NULL, "version_path" text, "update_sent" boolean NOT NULL, "updated_on" TIMESTAMP NOT NULL DEFAULT now(), "order_id" bigint, "subject_id" bigint, CONSTRAINT "order_published_photos_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "order_published_photos_original_path_idx" ON "admin"."order_published_photos" ("original_path") `);
        await queryRunner.query(`CREATE INDEX "order_published_photos_version_path_idx" ON "admin"."order_published_photos" ("version_path") `);
        await queryRunner.query(`CREATE INDEX "order_published_photos_order_id_fkey" ON "admin"."order_published_photos" ("order_id") `);
        await queryRunner.query(`CREATE INDEX "order_published_photos_subject_id_fkey" ON "admin"."order_published_photos" ("subject_id") `);
        await queryRunner.query(`INSERT INTO "public"."typeorm_metadata"("database", "schema", "table", "type", "name", "value") VALUES ($1, $2, $3, $4, $5, $6)`, ["pictaccio", "transactional", "contacts", "GENERATED_COLUMN", "name", "first_name || ' ' || last_name"]);
        await queryRunner.query(`INSERT INTO "public"."typeorm_metadata"("database", "schema", "table", "type", "name", "value") VALUES ($1, $2, $3, $4, $5, $6)`, ["pictaccio", "transactional", "contacts", "GENERATED_COLUMN", "phone_digits", "regexp_replace(phone, '[^\\\\d]+', '', 'g')"]);
        await queryRunner.query(`CREATE TABLE "transactional"."contacts" ("id" BIGSERIAL NOT NULL, "first_name" text NOT NULL, "last_name" text NOT NULL, "name" text GENERATED ALWAYS AS (first_name || ' ' || last_name) STORED NOT NULL, "email" text NOT NULL, "phone" text NOT NULL, "phone_digits" text GENERATED ALWAYS AS (regexp_replace(phone, '[^\\d]+', '', 'g')) STORED NOT NULL, "street_address_1" text NOT NULL, "street_address_2" text, "postal_code" text NOT NULL, "city" text NOT NULL, "region" text NOT NULL, "country" text NOT NULL, "newsletter" boolean NOT NULL, CONSTRAINT "contacts_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "contacts_name_idx" ON "transactional"."contacts" ("name") `);
        await queryRunner.query(`CREATE INDEX "contacts_email_idx" ON "transactional"."contacts" ("email") `);
        await queryRunner.query(`CREATE INDEX "contacts_first_name_idx" ON "transactional"."contacts" ("phone_digits") `);
        await queryRunner.query(`CREATE TABLE "transactional"."subject_groups" ("id" BIGSERIAL NOT NULL, "group" text NOT NULL, "photos" jsonb NOT NULL, "versions" jsonb, "session_id" bigint, CONSTRAINT "subject_groups_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "subject_groups_group_idx" ON "transactional"."subject_groups" ("group") `);
        await queryRunner.query(`CREATE INDEX "subject_groups_session_fkey" ON "transactional"."subject_groups" ("session_id") `);
        await queryRunner.query(`CREATE TABLE "transactional"."transactions" ("id" BIGSERIAL NOT NULL, "payment_module" text NOT NULL, "successful" boolean NOT NULL, "transaction_code" text, "processor_response" jsonb NOT NULL, "created" TIMESTAMP NOT NULL DEFAULT now(), "order_id" bigint, CONSTRAINT "transactions_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "transactions_order_id_fkey" ON "transactional"."transactions" ("order_id") `);
        await queryRunner.query(`CREATE TABLE "transactional"."orders" ("id" BIGSERIAL NOT NULL, "archived" boolean NOT NULL DEFAULT false, "cart" jsonb NOT NULL, "comment" text NOT NULL, "flags" jsonb, "paid" boolean NOT NULL DEFAULT false, "photo_selection" jsonb NOT NULL, "sale_subtotal" numeric(10,2) NOT NULL, "sale_delivery_price" numeric(10,2), "sale_taxes" jsonb, "sale_total" numeric(10,2), "created_on" TIMESTAMP NOT NULL DEFAULT now(), "completed_on" TIMESTAMP NOT NULL DEFAULT now(), "contact_id" bigint, "delivery_option_id" bigint, "session_id" bigint, CONSTRAINT "orders_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "orders_archived_idx" ON "transactional"."orders" ("archived") `);
        await queryRunner.query(`CREATE INDEX "orders_paid_idx" ON "transactional"."orders" ("paid") `);
        await queryRunner.query(`CREATE INDEX "orders_created_on_idx" ON "transactional"."orders" ("created_on") `);
        await queryRunner.query(`CREATE INDEX "orders_completed_on_idx" ON "transactional"."orders" ("completed_on") `);
        await queryRunner.query(`CREATE INDEX "orders_contact_id_fkey" ON "transactional"."orders" ("contact_id") `);
        await queryRunner.query(`CREATE INDEX "orders_delivery_option_id_fkey" ON "transactional"."orders" ("delivery_option_id") `);
        await queryRunner.query(`CREATE INDEX "orders_session_id_fkey" ON "transactional"."orders" ("session_id") `);
        await queryRunner.query(`CREATE TABLE "admin"."order_checks" ("id" SERIAL NOT NULL, "check" boolean NOT NULL, "photo_id" text NOT NULL, "product_id" text NOT NULL, "order_id" bigint, "subject_id" bigint, CONSTRAINT "order_checks_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "order_checks_order_id_fkey" ON "admin"."order_checks" ("order_id") `);
        await queryRunner.query(`CREATE INDEX "order_checks_subject_id_fkey" ON "admin"."order_checks" ("subject_id") `);
        await queryRunner.query(`CREATE TABLE "admin"."reset_requests" ("id" uuid NOT NULL DEFAULT uuid_generate_v4(), "code" text NOT NULL, "email" text NOT NULL, "user_id" text NOT NULL, "created_on" TIMESTAMP NOT NULL DEFAULT now(), CONSTRAINT "reset_requests_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE UNIQUE INDEX "reset_requests_email_key" ON "admin"."reset_requests" ("email") `);
        await queryRunner.query(`CREATE INDEX "reset_requests_created_on_idx" ON "admin"."reset_requests" ("created_on") `);
        await queryRunner.query(`CREATE TABLE "admin"."order_assignments" ("order_id" bigint NOT NULL, "user_id" uuid, CONSTRAINT "order_assignments_order_id_pkey" PRIMARY KEY ("order_id"))`);
        await queryRunner.query(`CREATE INDEX "order_assignments_user_id_fkey" ON "admin"."order_assignments" ("user_id") `);
        await queryRunner.query(`CREATE TABLE "transactional"."background_categories" ("id" BIGSERIAL NOT NULL, "name_locale" jsonb NOT NULL, "priority" integer NOT NULL DEFAULT '0', CONSTRAINT "background_categories_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "store_config" ("key" text NOT NULL, "value" text NOT NULL, CONSTRAINT "store_config_key_pkey" PRIMARY KEY ("key"))`);
        await queryRunner.query(`CREATE TABLE "transactional"."background_popularity_indices" ("id" BIGSERIAL NOT NULL, "day" TIMESTAMP NOT NULL, "stats_json" text NOT NULL, CONSTRAINT "PK_1b2f3de241dc9f786c4b92aaf34" PRIMARY KEY ("id"))`);
        await queryRunner.query(`INSERT INTO "public"."typeorm_metadata"("database", "schema", "table", "type", "name", "value") VALUES ($1, $2, $3, $4, $5, $6)`, ["pictaccio", "public", "app_integrations", "GENERATED_COLUMN", "active", "(configuration->>'active')::boolean"]);
        await queryRunner.query(`CREATE TABLE "app_integrations" ("app" text NOT NULL, "active" boolean GENERATED ALWAYS AS ((configuration->>'active')::boolean) STORED NOT NULL, "configuration" jsonb NOT NULL, CONSTRAINT "app_integrations_app_pkey" PRIMARY KEY ("app"))`);
        await queryRunner.query(`CREATE INDEX "app_integrations_active_idx" ON "app_integrations" ("active") `);
        await queryRunner.query(`CREATE TABLE "transactional"."backgrounds" ("id" BIGSERIAL NOT NULL, "name_locale" jsonb NOT NULL, "archived" boolean NOT NULL, "categories" jsonb NOT NULL, "featured" boolean NOT NULL, "image" text NOT NULL, "production_identifier" integer NOT NULL, CONSTRAINT "backgrounds_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "backgrounds_archived_idx" ON "transactional"."backgrounds" ("archived") `);
        await queryRunner.query(`CREATE INDEX "backgrounds_featured_idx" ON "transactional"."backgrounds" ("featured") `);
        // Manual query begin
        await queryRunner.query(`CREATE INDEX "backgrounds_categories_idx" ON "transactional"."backgrounds" USING GIN ("categories");`);
        // Manual query end
        await queryRunner.query(`CREATE UNIQUE INDEX "backgrounds_production_identifier_key" ON "transactional"."backgrounds" ("production_identifier") `);
        await queryRunner.query(`CREATE TABLE "transactional"."order_published_photos" ("id" BIGSERIAL NOT NULL, "images" jsonb NOT NULL, "order_id" bigint, "token" text NOT NULL, "created_on" TIMESTAMP NOT NULL DEFAULT now(), "modified_on" TIMESTAMP NOT NULL DEFAULT now(), CONSTRAINT "order_published_photos_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "order_published_photos_token_idx" ON "transactional"."order_published_photos" ("token") `);
        await queryRunner.query(`CREATE TABLE "transactional"."promo_code_campaigns" ("id" BIGSERIAL NOT NULL, "internal_name" text NOT NULL, "amount" numeric(10,2) NOT NULL, "code_prefix" text NOT NULL, "options" jsonb NOT NULL, "created_on" TIMESTAMP NOT NULL DEFAULT now(), "modified_on" TIMESTAMP NOT NULL DEFAULT now(), CONSTRAINT "promo_code_campaigns_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE UNIQUE INDEX "promo_code_campaigns_internal_name_idx" ON "transactional"."promo_code_campaigns" ("internal_name") `);
        await queryRunner.query(`CREATE TABLE "transactional"."promo_codes" ("id" BIGSERIAL NOT NULL, "code" text NOT NULL, "used" boolean NOT NULL, "created_on" TIMESTAMP NOT NULL DEFAULT now(), "used_on" TIMESTAMP NOT NULL DEFAULT now(), "campaign_id" bigint, "order_id" bigint, CONSTRAINT "REL_98dcaf14558d13f98e1892b023" UNIQUE ("order_id"), CONSTRAINT "promo_codes_id_pkey" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE UNIQUE INDEX "promo_codes_code_idx" ON "transactional"."promo_codes" ("code") `);
        await queryRunner.query(`CREATE INDEX "promo_codes_used_idx" ON "transactional"."promo_codes" ("used") `);
        await queryRunner.query(`CREATE INDEX "promo_codes_campaign_id_fkey" ON "transactional"."promo_codes" ("campaign_id") `);
        await queryRunner.query(`CREATE INDEX "promo_codes_order_id_fkey" ON "transactional"."promo_codes" ("order_id") `);
        await queryRunner.query(`CREATE TABLE "transactional"."delivery_option_groups_delivery_options_map" ("delivery_option_group_id" bigint NOT NULL, "delivery_option_id" bigint NOT NULL, CONSTRAINT "PK_ad13125eb074b77114fe4271ee4" PRIMARY KEY ("delivery_option_group_id", "delivery_option_id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_87bba13d85cde654dbe40156ce" ON "transactional"."delivery_option_groups_delivery_options_map" ("delivery_option_group_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_a5c09c8c77976a30f560303a7c" ON "transactional"."delivery_option_groups_delivery_options_map" ("delivery_option_id") `);
        await queryRunner.query(`CREATE TABLE "transactional"."product_catalogs_products_map" ("product_catalog_id" bigint NOT NULL, "product_id" bigint NOT NULL, CONSTRAINT "PK_875873b981ed17aa58a3b50aed6" PRIMARY KEY ("product_catalog_id", "product_id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_425841fde14893607561d02d42" ON "transactional"."product_catalogs_products_map" ("product_catalog_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_4ab545eb2b4cebf1bd0c580f2f" ON "transactional"."product_catalogs_products_map" ("product_id") `);
        await queryRunner.query(`CREATE TABLE "transactional"."product_crosssells_products_map" ("product_crosssell_id" bigint NOT NULL, "product_id" bigint NOT NULL, CONSTRAINT "PK_48c6af92b8c45c9b917f09b8887" PRIMARY KEY ("product_crosssell_id", "product_id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_bf16abbf86c4f9dcaa7bee3615" ON "transactional"."product_crosssells_products_map" ("product_crosssell_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_f728147c541f25b4012a4b8d9a" ON "transactional"."product_crosssells_products_map" ("product_id") `);
        await queryRunner.query(`CREATE TABLE "transactional"."sessions_delivery_option_groups_map" ("session_id" bigint NOT NULL, "delivery_option_group_id" bigint NOT NULL, CONSTRAINT "PK_a561800b66b478127e914ed67a4" PRIMARY KEY ("session_id", "delivery_option_group_id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_d3e57527080e1da3194fe56977" ON "transactional"."sessions_delivery_option_groups_map" ("session_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_c6d2e25bd6ec7e28ea72a19bfe" ON "transactional"."sessions_delivery_option_groups_map" ("delivery_option_group_id") `);
        await queryRunner.query(`CREATE TABLE "transactional"."sessions_product_catalogs_map" ("session_id" bigint NOT NULL, "product_catalog_id" bigint NOT NULL, CONSTRAINT "PK_fc5303a064d801609ba4e996b12" PRIMARY KEY ("session_id", "product_catalog_id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_c0be140681442e6f2a3e5b1b90" ON "transactional"."sessions_product_catalogs_map" ("session_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_ca9022b17aa0ac3fc611e26c7f" ON "transactional"."sessions_product_catalogs_map" ("product_catalog_id") `);
        await queryRunner.query(`CREATE TABLE "transactional"."orders_subject_groups_map" ("order_id" bigint NOT NULL, "subject_group_id" bigint NOT NULL, CONSTRAINT "PK_0f172561cd4ba68420d3724a5a8" PRIMARY KEY ("order_id", "subject_group_id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_e3753bb11e2e27b77368876cb7" ON "transactional"."orders_subject_groups_map" ("order_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_edd67ce806415e4acce76ce68b" ON "transactional"."orders_subject_groups_map" ("subject_group_id") `);
        await queryRunner.query(`CREATE TABLE "transactional"."orders_subjects_map" ("order_id" bigint NOT NULL, "subject_id" bigint NOT NULL, CONSTRAINT "PK_5fc621077ed0a0db649e6ee7518" PRIMARY KEY ("order_id", "subject_id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_45ff980d78ba80eb02ff748e9d" ON "transactional"."orders_subjects_map" ("order_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_e338c9a2a0cb98d5155d3a9522" ON "transactional"."orders_subjects_map" ("subject_id") `);
        await queryRunner.query(`ALTER TABLE "admin"."order_comments" ADD CONSTRAINT "FK_9bb41adf4431f6de42c79c4d305" FOREIGN KEY ("order_id") REFERENCES "transactional"."orders"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "admin"."order_comments" ADD CONSTRAINT "FK_4c675567d2a58f0b07cef09c13d" FOREIGN KEY ("user_id") REFERENCES "admin"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "admin"."order_statuses" ADD CONSTRAINT "FK_3ea5b2fdf48f16b209b65e73812" FOREIGN KEY ("order_id") REFERENCES "transactional"."orders"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "transactional"."product_type_themes" ADD CONSTRAINT "FK_e66dc8fbd7083da0f9394451a38" FOREIGN KEY ("theme_set_id") REFERENCES "transactional"."product_theme_sets"("id") ON DELETE SET NULL ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "transactional"."product_type_customs" ADD CONSTRAINT "FK_0c931c72554324eea0d7aea4dd4" FOREIGN KEY ("custom_template_id") REFERENCES "transactional"."product_custom_templates"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "transactional"."products" ADD CONSTRAINT "FK_9a5f6868c96e0069e699f33e124" FOREIGN KEY ("category_id") REFERENCES "transactional"."product_categories"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "transactional"."products" ADD CONSTRAINT "FK_02f7c9972c12ee9a155bcb53775" FOREIGN KEY ("theme_id") REFERENCES "transactional"."product_type_themes"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "transactional"."products" ADD CONSTRAINT "FK_c2ef038c5b16485c916206e6614" FOREIGN KEY ("custom_id") REFERENCES "transactional"."product_type_customs"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "transactional"."sessions" ADD CONSTRAINT "FK_25f2533b728fa5307cf212076e6" FOREIGN KEY ("product_crosssell_id") REFERENCES "transactional"."product_crosssells"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "transactional"."sessions" ADD CONSTRAINT "FK_d0ca141e4a74512b14d2ced87b3" FOREIGN KEY ("workflow_id") REFERENCES "transactional"."workflows"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "transactional"."subjects" ADD CONSTRAINT "FK_1641cb1733f8c5e8fa1ddc48428" FOREIGN KEY ("session_id") REFERENCES "transactional"."sessions"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "admin"."order_published_photos" ADD CONSTRAINT "FK_1b0fe441f520a4f3963e60ba4ee" FOREIGN KEY ("order_id") REFERENCES "transactional"."orders"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "admin"."order_published_photos" ADD CONSTRAINT "FK_92f26e2487366389647a05a0696" FOREIGN KEY ("subject_id") REFERENCES "transactional"."subjects"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "transactional"."subject_groups" ADD CONSTRAINT "FK_63303b125c10fbf6b8b68746dff" FOREIGN KEY ("session_id") REFERENCES "transactional"."sessions"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "transactional"."transactions" ADD CONSTRAINT "FK_3cb0558ed36997f1d9ecc1118e7" FOREIGN KEY ("order_id") REFERENCES "transactional"."orders"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "transactional"."orders" ADD CONSTRAINT "FK_382ec81f8325ade1575566bc247" FOREIGN KEY ("contact_id") REFERENCES "transactional"."contacts"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "transactional"."orders" ADD CONSTRAINT "FK_888a3cde613b4715d58b6fe3f50" FOREIGN KEY ("delivery_option_id") REFERENCES "transactional"."delivery_options"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "transactional"."orders" ADD CONSTRAINT "FK_4a911af0c90c68d0d98e491cc53" FOREIGN KEY ("session_id") REFERENCES "transactional"."sessions"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "admin"."order_checks" ADD CONSTRAINT "FK_0d991e7d5a39ab52a4fb0d796d0" FOREIGN KEY ("order_id") REFERENCES "transactional"."orders"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "admin"."order_checks" ADD CONSTRAINT "FK_8d768c9bb463fa40aaeaec3183a" FOREIGN KEY ("subject_id") REFERENCES "transactional"."subjects"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "admin"."order_assignments" ADD CONSTRAINT "FK_2879b5a864ad805fe7332f68346" FOREIGN KEY ("order_id") REFERENCES "transactional"."orders"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "admin"."order_assignments" ADD CONSTRAINT "FK_3bd89f7a0b002650a06fe8b8797" FOREIGN KEY ("user_id") REFERENCES "admin"."users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "transactional"."promo_codes" ADD CONSTRAINT "FK_661c8ba3e4b0a06d4d674be9afd" FOREIGN KEY ("campaign_id") REFERENCES "transactional"."promo_code_campaigns"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "transactional"."promo_codes" ADD CONSTRAINT "FK_98dcaf14558d13f98e1892b0231" FOREIGN KEY ("order_id") REFERENCES "transactional"."orders"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "transactional"."delivery_option_groups_delivery_options_map" ADD CONSTRAINT "FK_87bba13d85cde654dbe40156ce3" FOREIGN KEY ("delivery_option_group_id") REFERENCES "transactional"."delivery_option_groups"("id") ON DELETE CASCADE ON UPDATE CASCADE`);
        await queryRunner.query(`ALTER TABLE "transactional"."delivery_option_groups_delivery_options_map" ADD CONSTRAINT "FK_a5c09c8c77976a30f560303a7ca" FOREIGN KEY ("delivery_option_id") REFERENCES "transactional"."delivery_options"("id") ON DELETE CASCADE ON UPDATE CASCADE`);
        await queryRunner.query(`ALTER TABLE "transactional"."product_catalogs_products_map" ADD CONSTRAINT "FK_425841fde14893607561d02d425" FOREIGN KEY ("product_catalog_id") REFERENCES "transactional"."product_catalogs"("id") ON DELETE CASCADE ON UPDATE CASCADE`);
        await queryRunner.query(`ALTER TABLE "transactional"."product_catalogs_products_map" ADD CONSTRAINT "FK_4ab545eb2b4cebf1bd0c580f2fc" FOREIGN KEY ("product_id") REFERENCES "transactional"."products"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "transactional"."product_crosssells_products_map" ADD CONSTRAINT "FK_bf16abbf86c4f9dcaa7bee3615e" FOREIGN KEY ("product_crosssell_id") REFERENCES "transactional"."product_crosssells"("id") ON DELETE CASCADE ON UPDATE CASCADE`);
        await queryRunner.query(`ALTER TABLE "transactional"."product_crosssells_products_map" ADD CONSTRAINT "FK_f728147c541f25b4012a4b8d9a7" FOREIGN KEY ("product_id") REFERENCES "transactional"."products"("id") ON DELETE CASCADE ON UPDATE CASCADE`);
        await queryRunner.query(`ALTER TABLE "transactional"."sessions_delivery_option_groups_map" ADD CONSTRAINT "FK_d3e57527080e1da3194fe569772" FOREIGN KEY ("session_id") REFERENCES "transactional"."sessions"("id") ON DELETE CASCADE ON UPDATE CASCADE`);
        await queryRunner.query(`ALTER TABLE "transactional"."sessions_delivery_option_groups_map" ADD CONSTRAINT "FK_c6d2e25bd6ec7e28ea72a19bfe0" FOREIGN KEY ("delivery_option_group_id") REFERENCES "transactional"."delivery_option_groups"("id") ON DELETE CASCADE ON UPDATE CASCADE`);
        await queryRunner.query(`ALTER TABLE "transactional"."sessions_product_catalogs_map" ADD CONSTRAINT "FK_c0be140681442e6f2a3e5b1b90a" FOREIGN KEY ("session_id") REFERENCES "transactional"."sessions"("id") ON DELETE CASCADE ON UPDATE CASCADE`);
        await queryRunner.query(`ALTER TABLE "transactional"."sessions_product_catalogs_map" ADD CONSTRAINT "FK_ca9022b17aa0ac3fc611e26c7f6" FOREIGN KEY ("product_catalog_id") REFERENCES "transactional"."product_catalogs"("id") ON DELETE CASCADE ON UPDATE CASCADE`);
        await queryRunner.query(`ALTER TABLE "transactional"."orders_subject_groups_map" ADD CONSTRAINT "FK_e3753bb11e2e27b77368876cb7b" FOREIGN KEY ("order_id") REFERENCES "transactional"."orders"("id") ON DELETE CASCADE ON UPDATE CASCADE`);
        await queryRunner.query(`ALTER TABLE "transactional"."orders_subject_groups_map" ADD CONSTRAINT "FK_edd67ce806415e4acce76ce68b5" FOREIGN KEY ("subject_group_id") REFERENCES "transactional"."subject_groups"("id") ON DELETE CASCADE ON UPDATE CASCADE`);
        await queryRunner.query(`ALTER TABLE "transactional"."orders_subjects_map" ADD CONSTRAINT "FK_45ff980d78ba80eb02ff748e9da" FOREIGN KEY ("order_id") REFERENCES "transactional"."orders"("id") ON DELETE CASCADE ON UPDATE CASCADE`);
        await queryRunner.query(`ALTER TABLE "transactional"."orders_subjects_map" ADD CONSTRAINT "FK_e338c9a2a0cb98d5155d3a95222" FOREIGN KEY ("subject_id") REFERENCES "transactional"."subjects"("id") ON DELETE CASCADE ON UPDATE CASCADE`);
        // Manual query begin
        await queryRunner.query(`GRANT DELETE ON TABLE "transactional"."orders_subjects_map" TO "pictaccio_transactional"`);
        await queryRunner.query(`GRANT DELETE ON TABLE "transactional"."orders_subject_groups_map" TO "pictaccio_transactional"`);
        // Manual query end
    }

    public async down(queryRunner: QueryRunner): Promise<void> {
        // Manual query begin
        await queryRunner.query(`REVOKE DELETE ON TABLE "transactional"."orders_subjects_map" FROM "pictaccio_transactional"`);
        await queryRunner.query(`REVOKE DELETE ON TABLE "transactional"."orders_subject_groups_map" FROM "pictaccio_transactional"`);
        // Manual query end
        await queryRunner.query(`ALTER TABLE "transactional"."orders_subjects_map" DROP CONSTRAINT "FK_e338c9a2a0cb98d5155d3a95222"`);
        await queryRunner.query(`ALTER TABLE "transactional"."orders_subjects_map" DROP CONSTRAINT "FK_45ff980d78ba80eb02ff748e9da"`);
        await queryRunner.query(`ALTER TABLE "transactional"."orders_subject_groups_map" DROP CONSTRAINT "FK_edd67ce806415e4acce76ce68b5"`);
        await queryRunner.query(`ALTER TABLE "transactional"."orders_subject_groups_map" DROP CONSTRAINT "FK_e3753bb11e2e27b77368876cb7b"`);
        await queryRunner.query(`ALTER TABLE "transactional"."sessions_product_catalogs_map" DROP CONSTRAINT "FK_ca9022b17aa0ac3fc611e26c7f6"`);
        await queryRunner.query(`ALTER TABLE "transactional"."sessions_product_catalogs_map" DROP CONSTRAINT "FK_c0be140681442e6f2a3e5b1b90a"`);
        await queryRunner.query(`ALTER TABLE "transactional"."sessions_delivery_option_groups_map" DROP CONSTRAINT "FK_c6d2e25bd6ec7e28ea72a19bfe0"`);
        await queryRunner.query(`ALTER TABLE "transactional"."sessions_delivery_option_groups_map" DROP CONSTRAINT "FK_d3e57527080e1da3194fe569772"`);
        await queryRunner.query(`ALTER TABLE "transactional"."product_crosssells_products_map" DROP CONSTRAINT "FK_f728147c541f25b4012a4b8d9a7"`);
        await queryRunner.query(`ALTER TABLE "transactional"."product_crosssells_products_map" DROP CONSTRAINT "FK_bf16abbf86c4f9dcaa7bee3615e"`);
        await queryRunner.query(`ALTER TABLE "transactional"."product_catalogs_products_map" DROP CONSTRAINT "FK_4ab545eb2b4cebf1bd0c580f2fc"`);
        await queryRunner.query(`ALTER TABLE "transactional"."product_catalogs_products_map" DROP CONSTRAINT "FK_425841fde14893607561d02d425"`);
        await queryRunner.query(`ALTER TABLE "transactional"."delivery_option_groups_delivery_options_map" DROP CONSTRAINT "FK_a5c09c8c77976a30f560303a7ca"`);
        await queryRunner.query(`ALTER TABLE "transactional"."delivery_option_groups_delivery_options_map" DROP CONSTRAINT "FK_87bba13d85cde654dbe40156ce3"`);
        await queryRunner.query(`ALTER TABLE "transactional"."promo_codes" DROP CONSTRAINT "FK_98dcaf14558d13f98e1892b0231"`);
        await queryRunner.query(`ALTER TABLE "transactional"."promo_codes" DROP CONSTRAINT "FK_661c8ba3e4b0a06d4d674be9afd"`);
        await queryRunner.query(`ALTER TABLE "admin"."order_assignments" DROP CONSTRAINT "FK_3bd89f7a0b002650a06fe8b8797"`);
        await queryRunner.query(`ALTER TABLE "admin"."order_assignments" DROP CONSTRAINT "FK_2879b5a864ad805fe7332f68346"`);
        await queryRunner.query(`ALTER TABLE "admin"."order_checks" DROP CONSTRAINT "FK_8d768c9bb463fa40aaeaec3183a"`);
        await queryRunner.query(`ALTER TABLE "admin"."order_checks" DROP CONSTRAINT "FK_0d991e7d5a39ab52a4fb0d796d0"`);
        await queryRunner.query(`ALTER TABLE "transactional"."orders" DROP CONSTRAINT "FK_4a911af0c90c68d0d98e491cc53"`);
        await queryRunner.query(`ALTER TABLE "transactional"."orders" DROP CONSTRAINT "FK_888a3cde613b4715d58b6fe3f50"`);
        await queryRunner.query(`ALTER TABLE "transactional"."orders" DROP CONSTRAINT "FK_382ec81f8325ade1575566bc247"`);
        await queryRunner.query(`ALTER TABLE "transactional"."transactions" DROP CONSTRAINT "FK_3cb0558ed36997f1d9ecc1118e7"`);
        await queryRunner.query(`ALTER TABLE "transactional"."subject_groups" DROP CONSTRAINT "FK_63303b125c10fbf6b8b68746dff"`);
        await queryRunner.query(`ALTER TABLE "admin"."order_published_photos" DROP CONSTRAINT "FK_92f26e2487366389647a05a0696"`);
        await queryRunner.query(`ALTER TABLE "admin"."order_published_photos" DROP CONSTRAINT "FK_1b0fe441f520a4f3963e60ba4ee"`);
        await queryRunner.query(`ALTER TABLE "transactional"."subjects" DROP CONSTRAINT "FK_1641cb1733f8c5e8fa1ddc48428"`);
        await queryRunner.query(`ALTER TABLE "transactional"."sessions" DROP CONSTRAINT "FK_d0ca141e4a74512b14d2ced87b3"`);
        await queryRunner.query(`ALTER TABLE "transactional"."sessions" DROP CONSTRAINT "FK_25f2533b728fa5307cf212076e6"`);
        await queryRunner.query(`ALTER TABLE "transactional"."products" DROP CONSTRAINT "FK_c2ef038c5b16485c916206e6614"`);
        await queryRunner.query(`ALTER TABLE "transactional"."products" DROP CONSTRAINT "FK_02f7c9972c12ee9a155bcb53775"`);
        await queryRunner.query(`ALTER TABLE "transactional"."products" DROP CONSTRAINT "FK_9a5f6868c96e0069e699f33e124"`);
        await queryRunner.query(`ALTER TABLE "transactional"."product_type_customs" DROP CONSTRAINT "FK_0c931c72554324eea0d7aea4dd4"`);
        await queryRunner.query(`ALTER TABLE "transactional"."product_type_themes" DROP CONSTRAINT "FK_e66dc8fbd7083da0f9394451a38"`);
        await queryRunner.query(`ALTER TABLE "admin"."order_statuses" DROP CONSTRAINT "FK_3ea5b2fdf48f16b209b65e73812"`);
        await queryRunner.query(`ALTER TABLE "admin"."order_comments" DROP CONSTRAINT "FK_4c675567d2a58f0b07cef09c13d"`);
        await queryRunner.query(`ALTER TABLE "admin"."order_comments" DROP CONSTRAINT "FK_9bb41adf4431f6de42c79c4d305"`);
        await queryRunner.query(`DROP INDEX "transactional"."IDX_e338c9a2a0cb98d5155d3a9522"`);
        await queryRunner.query(`DROP INDEX "transactional"."IDX_45ff980d78ba80eb02ff748e9d"`);
        await queryRunner.query(`DROP TABLE "transactional"."orders_subjects_map"`);
        await queryRunner.query(`DROP INDEX "transactional"."IDX_edd67ce806415e4acce76ce68b"`);
        await queryRunner.query(`DROP INDEX "transactional"."IDX_e3753bb11e2e27b77368876cb7"`);
        await queryRunner.query(`DROP TABLE "transactional"."orders_subject_groups_map"`);
        await queryRunner.query(`DROP INDEX "transactional"."IDX_ca9022b17aa0ac3fc611e26c7f"`);
        await queryRunner.query(`DROP INDEX "transactional"."IDX_c0be140681442e6f2a3e5b1b90"`);
        await queryRunner.query(`DROP TABLE "transactional"."sessions_product_catalogs_map"`);
        await queryRunner.query(`DROP INDEX "transactional"."IDX_c6d2e25bd6ec7e28ea72a19bfe"`);
        await queryRunner.query(`DROP INDEX "transactional"."IDX_d3e57527080e1da3194fe56977"`);
        await queryRunner.query(`DROP TABLE "transactional"."sessions_delivery_option_groups_map"`);
        await queryRunner.query(`DROP INDEX "transactional"."IDX_f728147c541f25b4012a4b8d9a"`);
        await queryRunner.query(`DROP INDEX "transactional"."IDX_bf16abbf86c4f9dcaa7bee3615"`);
        await queryRunner.query(`DROP TABLE "transactional"."product_crosssells_products_map"`);
        await queryRunner.query(`DROP INDEX "transactional"."IDX_4ab545eb2b4cebf1bd0c580f2f"`);
        await queryRunner.query(`DROP INDEX "transactional"."IDX_425841fde14893607561d02d42"`);
        await queryRunner.query(`DROP TABLE "transactional"."product_catalogs_products_map"`);
        await queryRunner.query(`DROP INDEX "transactional"."IDX_a5c09c8c77976a30f560303a7c"`);
        await queryRunner.query(`DROP INDEX "transactional"."IDX_87bba13d85cde654dbe40156ce"`);
        await queryRunner.query(`DROP TABLE "transactional"."delivery_option_groups_delivery_options_map"`);
        await queryRunner.query(`DROP INDEX "transactional"."promo_codes_order_id_fkey"`);
        await queryRunner.query(`DROP INDEX "transactional"."promo_codes_campaign_id_fkey"`);
        await queryRunner.query(`DROP INDEX "transactional"."promo_codes_used_idx"`);
        await queryRunner.query(`DROP INDEX "transactional"."promo_codes_code_idx"`);
        await queryRunner.query(`DROP TABLE "transactional"."promo_codes"`);
        await queryRunner.query(`DROP INDEX "transactional"."promo_code_campaigns_internal_name_idx"`);
        await queryRunner.query(`DROP TABLE "transactional"."promo_code_campaigns"`);
        await queryRunner.query(`DROP INDEX "transactional"."order_published_photos_token_idx"`);
        await queryRunner.query(`DROP TABLE "transactional"."order_published_photos"`);
        await queryRunner.query(`DROP INDEX "transactional"."backgrounds_production_identifier_key"`);
        // Manual query begin
        await queryRunner.query(`DROP INDEX "transactional"."backgrounds_categories_idx";`);
        // Manual query end
        await queryRunner.query(`DROP INDEX "transactional"."backgrounds_featured_idx"`);
        await queryRunner.query(`DROP INDEX "transactional"."backgrounds_archived_idx"`);
        await queryRunner.query(`DROP TABLE "transactional"."backgrounds"`);
        await queryRunner.query(`DROP INDEX "public"."app_integrations_active_idx"`);
        await queryRunner.query(`DROP TABLE "app_integrations"`);
        await queryRunner.query(`DELETE FROM "public"."typeorm_metadata" WHERE "type" = $1 AND "name" = $2 AND "database" = $3 AND "schema" = $4 AND "table" = $5`, ["GENERATED_COLUMN", "active", "pictaccio", "public", "app_integrations"]);
        await queryRunner.query(`DROP TABLE "transactional"."background_popularity_indices"`);
        await queryRunner.query(`DROP TABLE "store_config"`);
        await queryRunner.query(`DROP TABLE "transactional"."background_categories"`);
        await queryRunner.query(`DROP INDEX "admin"."order_assignments_user_id_fkey"`);
        await queryRunner.query(`DROP TABLE "admin"."order_assignments"`);
        await queryRunner.query(`DROP INDEX "admin"."reset_requests_created_on_idx"`);
        await queryRunner.query(`DROP INDEX "admin"."reset_requests_email_key"`);
        await queryRunner.query(`DROP TABLE "admin"."reset_requests"`);
        await queryRunner.query(`DROP INDEX "admin"."order_checks_subject_id_fkey"`);
        await queryRunner.query(`DROP INDEX "admin"."order_checks_order_id_fkey"`);
        await queryRunner.query(`DROP TABLE "admin"."order_checks"`);
        await queryRunner.query(`DROP INDEX "transactional"."orders_session_id_fkey"`);
        await queryRunner.query(`DROP INDEX "transactional"."orders_delivery_option_id_fkey"`);
        await queryRunner.query(`DROP INDEX "transactional"."orders_contact_id_fkey"`);
        await queryRunner.query(`DROP INDEX "transactional"."orders_completed_on_idx"`);
        await queryRunner.query(`DROP INDEX "transactional"."orders_created_on_idx"`);
        await queryRunner.query(`DROP INDEX "transactional"."orders_paid_idx"`);
        await queryRunner.query(`DROP INDEX "transactional"."orders_archived_idx"`);
        await queryRunner.query(`DROP TABLE "transactional"."orders"`);
        await queryRunner.query(`DROP INDEX "transactional"."transactions_order_id_fkey"`);
        await queryRunner.query(`DROP TABLE "transactional"."transactions"`);
        await queryRunner.query(`DROP INDEX "transactional"."subject_groups_session_fkey"`);
        await queryRunner.query(`DROP INDEX "transactional"."subject_groups_group_idx"`);
        await queryRunner.query(`DROP TABLE "transactional"."subject_groups"`);
        await queryRunner.query(`DROP INDEX "transactional"."contacts_first_name_idx"`);
        await queryRunner.query(`DROP INDEX "transactional"."contacts_email_idx"`);
        await queryRunner.query(`DROP INDEX "transactional"."contacts_name_idx"`);
        await queryRunner.query(`DROP TABLE "transactional"."contacts"`);
        await queryRunner.query(`DELETE FROM "public"."typeorm_metadata" WHERE "type" = $1 AND "name" = $2 AND "database" = $3 AND "schema" = $4 AND "table" = $5`, ["GENERATED_COLUMN", "phone_digits", "pictaccio", "transactional", "contacts"]);
        await queryRunner.query(`DELETE FROM "public"."typeorm_metadata" WHERE "type" = $1 AND "name" = $2 AND "database" = $3 AND "schema" = $4 AND "table" = $5`, ["GENERATED_COLUMN", "name", "pictaccio", "transactional", "contacts"]);
        await queryRunner.query(`DROP INDEX "admin"."order_published_photos_subject_id_fkey"`);
        await queryRunner.query(`DROP INDEX "admin"."order_published_photos_order_id_fkey"`);
        await queryRunner.query(`DROP INDEX "admin"."order_published_photos_version_path_idx"`);
        await queryRunner.query(`DROP INDEX "admin"."order_published_photos_original_path_idx"`);
        await queryRunner.query(`DROP TABLE "admin"."order_published_photos"`);
        await queryRunner.query(`DROP INDEX "transactional"."subjects_session_id_fkey"`);
        await queryRunner.query(`DROP INDEX "transactional"."subjects_unique_id_idx"`);
        await queryRunner.query(`DROP INDEX "transactional"."subjects_group_idx"`);
        await queryRunner.query(`DROP INDEX "transactional"."subjects_display_name_idx"`);
        await queryRunner.query(`DROP INDEX "transactional"."subjects_code_idx"`);
        await queryRunner.query(`DROP TABLE "transactional"."subjects"`);
        await queryRunner.query(`DELETE FROM "public"."typeorm_metadata" WHERE "type" = $1 AND "name" = $2 AND "database" = $3 AND "schema" = $4 AND "table" = $5`, ["GENERATED_COLUMN", "display_name", "pictaccio", "transactional", "subjects"]);
        await queryRunner.query(`DROP INDEX "transactional"."sessions_workflow_fkey"`);
        await queryRunner.query(`DROP INDEX "transactional"."sessions_product_crosssell_fkey"`);
        await queryRunner.query(`DROP INDEX "transactional"."sessions_publish_date_idx"`);
        await queryRunner.query(`DROP INDEX "transactional"."sessions_expire_date_idx"`);
        await queryRunner.query(`DROP INDEX "transactional"."sessions_archived_idx"`);
        await queryRunner.query(`DROP TABLE "transactional"."sessions"`);
        await queryRunner.query(`DROP INDEX "transactional"."workflows_internal_name_idx"`);
        await queryRunner.query(`DROP TABLE "transactional"."workflows"`);
        await queryRunner.query(`DROP INDEX "transactional"."product_crosssells_internal_name_idx"`);
        await queryRunner.query(`DROP TABLE "transactional"."product_crosssells"`);
        await queryRunner.query(`DROP INDEX "transactional"."product_catalogs_internal_name_idx"`);
        await queryRunner.query(`DROP TABLE "transactional"."product_catalogs"`);
        await queryRunner.query(`DROP INDEX "transactional"."products_custom_id_fkey"`);
        await queryRunner.query(`DROP INDEX "transactional"."products_theme_id_fkey"`);
        await queryRunner.query(`DROP INDEX "transactional"."products_category_id_fkey"`);
        await queryRunner.query(`DROP INDEX "transactional"."products_type_idx"`);
        await queryRunner.query(`DROP INDEX "transactional"."products_archived_idx"`);
        await queryRunner.query(`DROP INDEX "transactional"."products_internal_name_idx"`);
        await queryRunner.query(`DROP TABLE "transactional"."products"`);
        await queryRunner.query(`DROP INDEX "transactional"."product_type_customs_custom_template_id_fkey"`);
        await queryRunner.query(`DROP TABLE "transactional"."product_type_customs"`);
        await queryRunner.query(`DROP INDEX "transactional"."product_custom_templates_internal_name_idx"`);
        await queryRunner.query(`DROP TABLE "transactional"."product_custom_templates"`);
        await queryRunner.query(`DROP INDEX "transactional"."product_theme_sets_internal_name_idx"`);
        await queryRunner.query(`DROP TABLE "transactional"."product_theme_sets"`);
        await queryRunner.query(`DROP INDEX "transactional"."product_type_themes_theme_set_id_fkey"`);
        await queryRunner.query(`DROP TABLE "transactional"."product_type_themes"`);
        await queryRunner.query(`DROP INDEX "transactional"."product_categories_internal_name_idx"`);
        await queryRunner.query(`DROP TABLE "transactional"."product_categories"`);
        await queryRunner.query(`DROP INDEX "transactional"."delivery_option_groups_internal_name_idx"`);
        await queryRunner.query(`DROP TABLE "transactional"."delivery_option_groups"`);
        await queryRunner.query(`DROP INDEX "transactional"."delivery_options_method_idx"`);
        await queryRunner.query(`DROP INDEX "transactional"."delivery_options_internal_name_idx"`);
        await queryRunner.query(`DROP TABLE "transactional"."delivery_options"`);
        await queryRunner.query(`DROP INDEX "admin"."order_statuses_order_id_fkey"`);
        await queryRunner.query(`DROP TABLE "admin"."order_statuses"`);
        await queryRunner.query(`DROP INDEX "admin"."comments_user_id_fkey"`);
        await queryRunner.query(`DROP INDEX "admin"."comments_order_id_fkey"`);
        await queryRunner.query(`DROP TABLE "admin"."order_comments"`);
        await queryRunner.query(`DROP TABLE "admin"."users"`);
    }

}
